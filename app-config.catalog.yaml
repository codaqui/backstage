# Override config for Backend Catalog
# Use with: --config app-config.yaml --config app-config.catalog.yaml
# This extends the base app-config.yaml with catalog-specific overrides

backend:
  auth:
    externalAccess:
      - type: static
        options:
          token: ${BACKEND_SECRET}
          subject: backstage-auth-service-to-service
  # Note: baseUrl inherited from app-config.docker.yaml (http://localhost:3000)
  # Backend-catalog doesn't need external URL (no OAuth or browser endpoints)
  # but inheriting the correct value prevents warnings in Discovery Service
  listen:
    port: 7008
    host: 0.0.0.0
  cors:
    # Only backend-to-backend communication needs CORS
    # Browser requests come through NGINX, which handles CORS
    origin:
      - http://backend-main:7007 # Docker internal
      - http://localhost:7007 # Fallback for local testing
      - http://localhost:3000 # NGINX origin preservation
