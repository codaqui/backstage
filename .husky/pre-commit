#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# ğŸ›¡ï¸ Pre-commit Hook - Codaqui Backstage Quality Gate
# This hook runs before every commit to ensure code quality

echo "ğŸ” Running pre-commit checks..."

# 1. Type checking with TypeScript
echo "ğŸ“ Type checking..."
yarn type-check || {
  echo "âŒ TypeScript type check failed!"
  echo "ğŸ’¡ Fix type errors or run 'yarn type-check' to see details"
  exit 1
}

# 2. Lint staged files
echo "ğŸ” Linting staged files..."
yarn lint-staged || {
  echo "âŒ Linting failed!"
  echo "ğŸ’¡ Run 'yarn quality:fix' to auto-fix issues"
  exit 1
}

echo "âœ… Pre-commit checks passed!"
echo "ğŸš€ Committing changes..."
