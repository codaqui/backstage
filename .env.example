# ============================================
# Codaqui Backstage Portal - Environment Variables
# ============================================
# Copy this file to .env and fill with your actual values
# NEVER commit .env files to version control!

# ============================================
# Database Configuration
# ============================================
POSTGRES_HOST="postgres"
POSTGRES_PORT="5432"
POSTGRES_USER="backstage"
POSTGRES_PASSWORD="change-this-password"
POSTGRES_DB="backstage"

# ============================================
# GitHub OAuth App Credentials
# ============================================
# Create a GitHub OAuth App at: https://github.com/settings/applications/new
# 
# IMPORTANT: When running with Docker Compose, use:
# Callback URL: http://localhost:3000/api/auth/github/handler/frame
# 
# (NGINX on port 3000 will proxy to backend-main:7007)
GITHUB_CLIENT_ID="your-oauth-app-client-id"
GITHUB_CLIENT_SECRET="your-oauth-app-client-secret"

# ============================================
# GitHub App Credentials (Organization Integration)
# ============================================
# Create a GitHub App at: https://github.com/organizations/YOUR_ORG/settings/apps/new
# Required permissions:
# - Repository: Contents (Read), Metadata (Read)
# - Organization: Members (Read)
# Subscribe to events: push, repository
GITHUB_ORG_APP_ID="your-github-app-id"
GITHUB_ORG_WEBHOOK_URL="your-webhook-url-or-smee-url"
GITHUB_ORG_CLIENT_ID="your-github-app-client-id"
GITHUB_ORG_CLIENT_SECRET="your-github-app-client-secret"
GITHUB_ORG_WEBHOOK_SECRET="your-webhook-secret"
GITHUB_ORG_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nyour-private-key-content-here\n-----END RSA PRIVATE KEY-----"

# ============================================
# Application Settings
# ============================================
NODE_OPTIONS="--no-node-snapshot"
NODE_ENV="development"

# ============================================
# Service Discovery (Microservices Architecture)
# ============================================
# Backend-to-backend communication (internal)
# Docker Compose overrides these automatically to use service names
# Only needed if running backends locally (yarn start:catalog / yarn start:main / yarn start:techdocs)
CATALOG_SERVICE_URL="http://localhost:7008"
TECHDOCS_SERVICE_URL="http://localhost:7009"
MAIN_SERVICE_URL="http://localhost:7007"

# ============================================
# Backend Authentication (Service-to-Service)
# ============================================
# Shared secret for backend-to-backend authentication
# Generate with: openssl rand -base64 32
BACKEND_SECRET="change-this-to-a-random-secret-in-production"

# ============================================
# Kubernetes Integration (Optional)
# ============================================
CODAQUI_TESTING_WITH_KUBERNETES="false"