app:
  title: 'Portal Codaqui'
  baseUrl: http://localhost:3000
  packages: all

organization:
  name: Codaqui

backend:
  # Frontend should make API calls to itself (nginx will proxy)
  # This avoids CORS issues and allows nginx to route to correct backend
  baseUrl: http://localhost:3000

  # CORS not needed when frontend proxies through nginx
  cors:
    origin: http://localhost:3000
    methods: [GET, HEAD, PATCH, POST, PUT, DELETE]
    credentials: true

# Reference documentation http://backstage.io/docs/features/techdocs/configuration
# Note: After experimenting with basic setup, use CI/CD to generate docs
# and an external cloud storage when deploying TechDocs for production use-case.
# https://backstage.io/docs/features/techdocs/how-to-guides#how-to-migrate-from-techdocs-basic-to-recommended-deployment-approach
techdocs:
  builder: 'local' # Alternatives - 'external'
  generator:
    runIn: 'docker' # Alternatives - 'local'
  publisher:
    type: 'local' # Alternatives - 'googleGcs' or 'awsS3'. Read documentation for using alternatives.

scaffolder:
  # see https://backstage.io/docs/features/software-templates/configuration for software template options

catalog:
  # orphanStrategy: delete
  # orphanProviderStrategy: delete
  processingInterval: { minutes: 5 }
  # https://backstage.io/docs/features/software-catalog/configuration/#stitching-strategy
  stitchingStrategy:
    mode: immediate # Alternatives: 'deferred'
  import:
    entityFilename: catalog-info.yaml
    pullRequestBranchName: backstage-integration
  rules:
    - allow: [Component, System, API, Resource, Location]
  locations:
    # Common Resources (always loaded: users, groups, systems)
    - type: file
      target: ./default/common/*.yaml
      rules:
        - allow: [User, Group, Component, System, Domain]

    # Kubernetes Resources (loaded when files exist)
    - type: file
      target: ./default/k8s/catalog-info.yaml
      rules:
        - allow: [Component, Resource]

    # Software Templates
    - type: file
      target: ./default/templates/*/template.yaml
      rules:
        - allow: [Template]

# see https://backstage.io/docs/permissions/getting-started for more on the permission framework
permission:
  # setting this to `false` will disable permissions
  enabled: true
